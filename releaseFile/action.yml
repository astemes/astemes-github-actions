name: "Release File"
description: "Publishes a file to a github release"

inputs:
  file-path:
    description: "Path to the file to release"
    required: true

runs:
  using: "composite"
  steps:
    - id: normalize-path
      run: |
        $normalizedPath = "${{ inputs.file-path }}" -replace '\\', '/'
        Write-Host "Original path: ${{ inputs.file-path }}"
        Write-Host "Normalized path: $normalizedPath"
        "normalized-path=$normalizedPath" | Out-File -FilePath $env:GITHUB_OUTPUT -Encoding utf8 -Append
      shell: powershell
    - name: Release file
      uses: astemes/action-gh-release@v1
      if: github.ref_type == 'tag'
      with:
        tag_name: ${{ github.ref_name }}
        files: ${{ steps.normalize-path.outputs.normalized-path }}
        prerelease: true